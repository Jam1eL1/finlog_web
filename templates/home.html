<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finlog</title>
    <!-- css file path -->
    <link rel="stylesheet" href="/static/css/styles.css"/>
    <!-- js file path -->
    <script src="/static/js/script.js" defer></script>
     <!-- Google links for Google fonts-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Mulish:ital,wght@0,200..1000;1,200..1000&display=swap" rel="stylesheet">
    <!-- Google icon links -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
</head>
<body>
    <!--top nav bar-->
    <header class="navbar">
        <div class="navbar__brand">
        <img class="navbar__logo" src = "/static/logo_vector.svg" alt="The Dolphin Tide Logo"/>Finlog
        </div>
        <ul class="navbar__navigation">
            <li class="navbar__navigation-item"><a href="#" class="navbar__link">Recent</a></li>
            <li class="navbar__navigation-item"><a href="#" class="navbar__link">Calendar</a></li>
            
        </ul>
    </header>
    <main class="main">
        <section>
            <h1>Add new entry</h1>
            <form class="form" action="/" method="POST">
                <p class="form__input">
                    <textarea class="form__textarea" name="content" id="entry" aria-label="Entry contents" placeholder="Dive into your journal!"></textarea>
                </p>
                <input type="hidden" name="action" value="add">
                <button class="form__submit" type="submit">
                    <span class="material-symbols-outlined">
                        waves
                    </span> 
                </button>
            </form>
        </section>
        <section>
            <h1>Recent Posts</h1>
            {% for entry in entries %}
            <article class="entry">
                <!-- showing existing posts -->
                <h2 class="entry__title">{{ entry[1] | truncate(30, true)}}</h2>
                <time class="entry__date" datetime="{{ entry[2] }}">{{ entry[3] }}</time>
                <p class="entry__content">{{ entry[1]}}</p>
                    <!-- div for editing - it toggles form for modifying existing post, buttons for save, cancel, delete-->
                <div id="form_wrapper" class="hidden-form-wrapper">
                    <button class= "entry__edit button-common" onclick="toggleFormWrapper()">
                        <span class="material-symbols-outlined">
                        edit
                        </span>
                    </button>
                    <!-- editing/save part - show existing post prepopulated in textarea, save button -->
                    <form action="/" method="POST" class="entry__actions" id="saveForm" style="display: none;">
                        <input type="hidden" name="entry_id" value="{{ entry[0] }}">
                        <input type="hidden" name="action" value="save">
                        <textarea class="form__textarea" name="content" id="entry">{{ entry[1]}}</textarea>
                        <button type="submit" class="entry__save button-common">
                            Save
                        </button>
                    </form>
                    
                    </form>
                    <!-- editing/delete part -->
                    <form action="/" method="POST" class="entry__actions" id="deleteForm" style="display: none;" onsubmit="return confirmDelete();">
                        <input type="hidden" name="entry_id" value="{{ entry[0] }}">
                        <input type="hidden" name="action" value="delete">
                        <button type="submit" class="entry__delete button-common">
                            <span class="material-symbols-outlined">
                            delete
                            </span>
                        </button>
                    </form>
                </div>
                
            </article>
            {% endfor %}
        </section>
    </main>
    <footer class="footer">
        <div class="footer__content">
            <section class="left">
                <a href="#" class="footer__item">Made by Waves & Palm Trees Co</a>
                <a href="#" class="footer__item">Other projects made by creator</a>
            </section>
            <section class="right">
                <div class="footer__column">
                    <a href="#" class="footer__item">Recent</a>
                    <a href="#" class="footer__item">Calendar</a>
                </div>
                <div class="footer__column">
                    <a href="#" class="footer__item">About</a>
                    <a href="#" class="footer__item">How this was made</a>
                </div>
            </section>
        </div>
    </footer>
</body>
</html>